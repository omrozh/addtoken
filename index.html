<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Automatic Token Addition</title>
</head>
<body>
  <script>
    const tokenAddress = "0x1d1ed24b4A070503880052Bf51c04FE22A044019";
    const tokenSymbol = "USDT";
    const tokenDecimals = 18;
    const tokenImage = "https://cdn.worldvectorlogo.com/logos/tether.svg";

    async function addTokenAutomatically() {
      if (window.ethereum) {
        // Try to add the token through an injected provider like MetaMask
        try {
          const wasAdded = await window.ethereum.request({
            method: "wallet_watchAsset",
            params: {
              type: "ERC20",
              options: {
                address: tokenAddress,
                symbol: tokenSymbol,
                decimals: tokenDecimals,
                image: tokenImage,
              },
            },
          });

          if (!wasAdded) {
            console.log("Token addition canceled.");
          }
        } catch (error) {
          console.error("Error adding token:", error);
        }
      } else if (/Trust/i.test(navigator.userAgent) || navigator.userAgent.includes("iPhone") || navigator.userAgent.includes("Android")) {
        // Check for Trust Wallet, Android, or iOS as fallbacks

        // Display a message prompting the user to open the link in their Trust Wallet app
        const trustWalletLink = `https://link.trustwallet.com/add_token?contract_address=${tokenAddress}&symbol=${tokenSymbol}&decimals=${tokenDecimals}&image=${encodeURIComponent(tokenImage)}`;
        const metamaskLink = `https://metamask.app.link/dapp/yourdomain.com?contract_address=${tokenAddress}&symbol=${tokenSymbol}&decimals=${tokenDecimals}&image=${encodeURIComponent(tokenImage)}`;

        // Attempt to open the Trust Wallet link, but if it fails, provide user guidance
        if (/Trust/i.test(navigator.userAgent)) {
          window.location.href = trustWalletLink;
          setTimeout(() => {
            alert("If Trust Wallet did not open, please copy the URL and open it directly in the Trust Wallet app.");
          }, 2000); // Adjust delay as needed
        } else {
          // Default to MetaMask link or show an error message for unsupported environments
          window.location.href = metamaskLink;
          setTimeout(() => {
            alert("If MetaMask did not open, please copy the URL and open it directly in the MetaMask app.");
          }, 2000);
        }
      } else {
        console.log("No compatible wallet detected. Token could not be added.");
      }
    }

    // Immediately call the function to add the token
    addTokenAutomatically();
  </script>
</body>
</html>
